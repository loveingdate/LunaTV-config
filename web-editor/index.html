<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Luna TVÈÖçÁΩÆÁºñËæëÂô® - ‰∏ì‰∏öÁöÑJSONÈÖçÁΩÆÊñá‰ª∂ÁºñËæëÂ∑•ÂÖ∑">
    <title>üåô Luna TV ÈÖçÁΩÆÁºñËæëÂô®</title>
    
    <!-- PWA ÊîØÊåÅ -->
    <link rel="manifest" href="assets/manifest.json">
    <meta name="theme-color" content="#1e1e1e">
    
    <!-- Ê†∑ÂºèÊñá‰ª∂ -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- Â§ñÈÉ®Â∫ì -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåô</text></svg>">
</head>
<body class="theme-dark">
    <!-- È°µÈù¢Âä†ËΩΩÂô® -->
    <div class="page-loader" id="pageLoader">
        <div class="loader-content">
            <div class="loader-icon">üåô</div>
            <div class="loader-text">Âä†ËΩΩ Luna TV ÁºñËæëÂô®...</div>
            <div class="loader-progress"><div class="progress-bar"></div></div>
        </div>
    </div>

    <!-- ‰∏ªÂ∫îÁî®ÂÆπÂô® -->
    <div class="app-container" id="appContainer">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <header class="app-header">
            <div class="header-left">
                <div class="app-logo">
                    <span class="logo-icon">üåô</span>
                    <span class="logo-text">Luna TV ÈÖçÁΩÆÁºñËæëÂô®</span>
                </div>
                <div class="app-status" id="appStatus">
                    <span class="status-indicator"></span>
                    <span class="status-text">ÂáÜÂ§áÂ∞±Áª™</span>
                </div>
            </div>
            
            <div class="header-right">
                <button class="header-btn" id="settingsBtn" title="ËÆæÁΩÆ">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="header-btn" id="themeToggle" title="ÂàáÊç¢‰∏ªÈ¢ò">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="header-btn" id="helpBtn" title="Â∏ÆÂä©">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </header>

        <!-- Â∑•ÂÖ∑Ê†è -->
        <div class="toolbar">
            <div class="toolbar-section">
                <div class="btn-group">
                    <button class="btn btn-primary" id="loadConfigBtn">
                        <i class="fas fa-cloud-download-alt"></i>
                        <span>üì• Âä†ËΩΩÈÖçÁΩÆ</span>
                    </button>
                    <button class="btn btn-success" id="saveConfigBtn" disabled>
                        <i class="fas fa-save"></i>
                        <span>üíæ ‰øùÂ≠òÈÖçÁΩÆ</span>
                    </button>
                </div>
            </div>
            
            <div class="toolbar-section">
                <div class="btn-group">
                    <button class="btn btn-secondary" id="formatBtn">
                        <i class="fas fa-code"></i>
                        <span>Ê†ºÂºèÂåñ</span>
                    </button>
                    <button class="btn btn-secondary" id="compressBtn">
                        <i class="fas fa-compress-alt"></i>
                        <span>ÂéãÁº©</span>
                    </button>
                    <button class="btn btn-secondary" id="validateBtn">
                        <i class="fas fa-check-circle"></i>
                        <span>È™åËØÅ</span>
                    </button>
                </div>
            </div>
            
            <div class="toolbar-section">
                <div class="btn-group">
                    <input type="file" id="fileInput" accept=".json" class="file-input" />
                    <button class="btn btn-info" id="uploadBtn">
                        <i class="fas fa-upload"></i>
                        <span>‰∏ä‰º†Êñá‰ª∂</span>
                    </button>
                    <button class="btn btn-info" id="downloadBtn">
                        <i class="fas fa-download"></i>
                        <span>‰∏ãËΩΩÊñá‰ª∂</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- GitHubÈÖçÁΩÆÈù¢Êùø -->
        <div class="github-panel collapsed" id="githubPanel">
            <div class="panel-header">
                <h3 class="panel-title">
                    <i class="fab fa-github"></i>
                    GitHub ÈÖçÁΩÆ
                </h3>
                <button class="panel-toggle" id="githubPanelToggle">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
            <div class="panel-content">
                <div class="config-grid">
                    <div class="config-group">
                        <label for="githubToken" class="config-label">GitHub Token *</label>
                        <div class="input-wrapper">
                            <input type="password" id="githubToken" class="config-input" 
                                   placeholder="ghp_xxxxxxxxxxxx" 
                                   autocomplete="current-password">
                            <button class="input-btn" id="toggleTokenVisibility">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <small class="config-hint">ÈúÄË¶Å 'repo' ÊùÉÈôêÁöÑ Personal Access Token</small>
                    </div>
                    
                    <div class="config-group">
                        <label for="repoOwner" class="config-label">‰ªìÂ∫ìÊâÄÊúâËÄÖ</label>
                        <input type="text" id="repoOwner" class="config-input" value="hafrey1">
                    </div>
                    
                    <div class="config-group">
                        <label for="repoName" class="config-label">‰ªìÂ∫ìÂêçÁß∞</label>
                        <input type="text" id="repoName" class="config-input" value="LunaTV-config">
                    </div>
                    
                    <div class="config-group">
                        <label for="filePath" class="config-label">Êñá‰ª∂Ë∑ØÂæÑ</label>
                        <select id="filePath" class="config-input">
                            <option value="luna-tv-config.json">luna-tv-config.json (‰∏ªÈÖçÁΩÆ)</option>
                            <option value="jinhuang.json">jinhuang.json (Êó†ÈªÑÈÖçÁΩÆ)</option>
                        </select>
                    </div>
                </div>
                
                <div class="config-actions">
                    <button class="btn btn-outline" id="testConnectionBtn">
                        <i class="fas fa-plug"></i>
                        ÊµãËØïËøûÊé•
                    </button>
                    <button class="btn btn-outline" id="clearTokenBtn">
                        <i class="fas fa-trash"></i>
                        Ê∏ÖÈô§Token
                    </button>
                </div>
            </div>
        </div>

        <!-- ‰∏ªÁºñËæëÂå∫Âüü -->
        <div class="editor-container">
            <!-- ÁºñËæëÂô®Ê†áÁ≠æÊ†è -->
            <div class="editor-tabs">
                <button class="tab-btn active" data-tab="editor">
                    <i class="fas fa-code"></i>
                    <span>JSON ÁºñËæëÂô®</span>
                </button>
                <button class="tab-btn" data-tab="tree">
                    <i class="fas fa-sitemap"></i>
                    <span>Ê†ëÁä∂ËßÜÂõæ</span>
                </button>
                <button class="tab-btn" data-tab="preview">
                    <i class="fas fa-eye"></i>
                    <span>È¢ÑËßàÊ®°Âºè</span>
                </button>
            </div>
            
            <!-- ÁºñËæëÂô®ÂÜÖÂÆπÂå∫ -->
            <div class="editor-content">
                <!-- Monaco ÁºñËæëÂô® -->
                <div class="editor-tab active" data-tab="editor">
                    <div id="monacoEditor" class="monaco-container"></div>
                </div>
                
                <!-- Ê†ëÁä∂ËßÜÂõæ -->
                <div class="editor-tab" data-tab="tree">
                    <div class="tree-container">
                        <div class="tree-toolbar">
                            <button class="btn btn-small" id="expandAllBtn">
                                <i class="fas fa-expand-alt"></i> ÂÖ®ÈÉ®Â±ïÂºÄ
                            </button>
                            <button class="btn btn-small" id="collapseAllBtn">
                                <i class="fas fa-compress-alt"></i> ÂÖ®ÈÉ®ÊäòÂè†
                            </button>
                        </div>
                        <div id="jsonTree" class="json-tree"></div>
                    </div>
                </div>
                
                <!-- È¢ÑËßàÊ®°Âºè -->
                <div class="editor-tab" data-tab="preview">
                    <div class="preview-container">
                        <div class="preview-toolbar">
                            <button class="btn btn-small" id="copyPreviewBtn">
                                <i class="fas fa-copy"></i> Â§çÂà∂
                            </button>
                        </div>
                        <pre id="jsonPreview" class="json-preview"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Áä∂ÊÄÅÊ†è -->
        <div class="status-bar">
            <div class="status-left">
                <span class="status-item" id="fileInfo">Êú™Âä†ËΩΩÊñá‰ª∂</span>
                <span class="status-item" id="fileSize">0 B</span>
                <span class="status-item" id="lastSaved"></span>
            </div>
            <div class="status-center">
                <span class="status-item validation-status" id="validationStatus">
                    <i class="fas fa-check-circle"></i> ÊúâÊïà JSON
                </span>
            </div>
            <div class="status-right">
                <span class="status-item" id="cursorPosition">Ë°å 1, Âàó 1</span>
                <span class="status-item" id="selectionInfo"></span>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°ÜÂÆπÂô® -->
    <div class="modal-overlay" id="modalOverlay">
        <!-- Â∏ÆÂä©Ê®°ÊÄÅÊ°Ü -->
        <div class="modal help-modal" id="helpModal">
            <div class="modal-header">
                <h3 class="modal-title">‰ΩøÁî®Â∏ÆÂä©</h3>
                <button class="modal-close" data-modal="help">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-content">
                <div class="help-section">
                    <h4>üöÄ Âø´ÈÄüÂºÄÂßã</h4>
                    <ol>
                        <li>Âú® GitHub ÈÖçÁΩÆÂå∫ÂüüËæìÂÖ•ÊÇ®ÁöÑ Personal Access Token</li>
                        <li>ÁÇπÂáª "üì• Âä†ËΩΩÈÖçÁΩÆ" ‰ªé‰ªìÂ∫ìÂä†ËΩΩJSONÊñá‰ª∂</li>
                        <li>Âú®ÁºñËæëÂô®‰∏≠‰øÆÊîπÈÖçÁΩÆ</li>
                        <li>ÁÇπÂáª "üíæ ‰øùÂ≠òÈÖçÁΩÆ" Êàñ‰ΩøÁî® Ctrl+S ‰øùÂ≠òÂà∞‰ªìÂ∫ì</li>
                    </ol>
                </div>
                
                <div class="help-section">
                    <h4>‚å®Ô∏è Âø´Êç∑ÈîÆ</h4>
                    <div class="shortcuts-grid">
                        <div class="shortcut-item">
                            <kbd>Ctrl + S</kbd>
                            <span>‰øùÂ≠òÂà∞GitHub</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl + O</kbd>
                            <span>‰ªéGitHubÂä†ËΩΩ</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl + U</kbd>
                            <span>‰∏ä‰º†Êñá‰ª∂</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl + D</kbd>
                            <span>‰∏ãËΩΩÊñá‰ª∂</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl + F</kbd>
                            <span>Êü•Êâæ</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl + H</kbd>
                            <span>Êü•ÊâæÊõøÊç¢</span>
                        </div>
                    </div>
                </div>
                
                <div class="help-section">
                    <h4>üîë Ëé∑Âèñ GitHub Token</h4>
                    <p>1. ËÆøÈóÆ <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings ‚Üí Personal access tokens</a></p>
                    <p>2. ÁÇπÂáª "Generate new token (classic)"</p>
                    <p>3. ÈÄâÊã© <code>repo</code> ÊùÉÈôê</p>
                    <p>4. Â§çÂà∂ÁîüÊàêÁöÑTokenÂπ∂Á≤òË¥¥Âà∞ÈÖçÁΩÆÂå∫Âüü</p>
                </div>
            </div>
        </div>
        
        <!-- ËÆæÁΩÆÊ®°ÊÄÅÊ°Ü -->
        <div class="modal settings-modal" id="settingsModal">
            <div class="modal-header">
                <h3 class="modal-title">ÁºñËæëÂô®ËÆæÁΩÆ</h3>
                <button class="modal-close" data-modal="settings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-content">
                <div class="settings-section">
                    <h4>ÁºñËæëÂô®ÈÄâÈ°π</h4>
                    <div class="setting-item">
                        <label class="setting-label">Â≠ó‰ΩìÂ§ßÂ∞è</label>
                        <input type="range" id="fontSizeSlider" min="10" max="24" value="14" class="setting-slider">
                        <span id="fontSizeValue">14px</span>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Tab Â§ßÂ∞è</label>
                        <select id="tabSizeSelect" class="setting-select">
                            <option value="2">2 Á©∫Ê†º</option>
                            <option value="4">4 Á©∫Ê†º</option>
                            <option value="8">8 Á©∫Ê†º</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Ëá™Âä®Êç¢Ë°å</label>
                        <input type="checkbox" id="wordWrapToggle" class="setting-checkbox">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">ÊòæÁ§∫Â∞èÂú∞Âõæ</label>
                        <input type="checkbox" id="minimapToggle" class="setting-checkbox" checked>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Â∫îÁî®ÈÄâÈ°π</h4>
                    <div class="setting-item">
                        <label class="setting-label">Ëá™Âä®‰øùÂ≠òÈó¥Èöî</label>
                        <select id="autoSaveInterval" class="setting-select">
                            <option value="0">Á¶ÅÁî®</option>
                            <option value="30">30Áßí</option>
                            <option value="60">1ÂàÜÈíü</option>
                            <option value="300">5ÂàÜÈíü</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">ÂéÜÂè≤ËÆ∞ÂΩïÊï∞Èáè</label>
                        <input type="number" id="historySize" class="setting-input" min="5" max="50" value="10">
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button class="btn btn-outline" id="resetSettingsBtn">
                        <i class="fas fa-undo"></i> ÈáçÁΩÆËÆæÁΩÆ
                    </button>
                    <button class="btn btn-primary" id="saveSettingsBtn">
                        <i class="fas fa-save"></i> ‰øùÂ≠òËÆæÁΩÆ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁü•ÂÆπÂô® -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- ËÑöÊú¨Êñá‰ª∂ -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/github-api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Monaco Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
</body>
</html>
